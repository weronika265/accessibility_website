{#{% extends 'base.html.twig' %}#}

{% block body %}
    <nav aria-label="Creator sidebar" id="sidebar">
        <ul>
            <li id="wcag-list">
                <div class="main-item" tabindex="0"><a href="{{ url('tworca_index') }}">Wytyczne WCAG 2.1</a></div>
                <ul id="wcag-list-content">
                    <li>
                        <button id="perceivable" aria-expanded="false">Postrzegalność<i class='fa fa-angle-down' style="margin-left: 0.5em;"></i></button>
                            <ul id="perceivable-items" style="padding-left: 0.2em;">
                                <li><a href="{{ url('alt-txt_index', {id: 1}) }}">1.1 Alternatywa tekstowa</a></li>
                                <li><a href="{{ url('multimedia_index', {id: 2}) }}">1.2 Multimedia</a></li>
                                <li><a href="{{ url('adapt_index', {id: 3}) }}">1.3 Możliwość adaptacji</a></li>
                                <li><a href="{{ url('distinguish_index', {id: 4}) }}">1.4 Rozróżnialność</a></li>
                            </ul>
                    </li>
                    <li>
                        <button id="operable" aria-expanded="false">Funkcjonalność<i class='fa fa-angle-down' style="margin-left: 0.5em;"></i></button>
                            <ul id="operable-items" style="padding-left: 0.2em;">
                                <li><a href="{{ url('keyboard_index', {id: 5}) }}">2.1 Dostępność <br/>z klawiatury</a></li>
                                <li><a href="{{ url('time_index', {id: 6}) }}">2.2 Wystarczający czas</a></li>
                                <li><a href="{{ url('epilepsy_index', {id: 7}) }}">2.3 Ataki padaczki</a></li>
                                <li><a href="{{ url('nav_index', {id: 8}) }}">2.4 Możliwość nawigacji</a></li>
                                <li><a href="{{ url('inputs_index', {id: 9}) }}">2.5 Metody obsługi</a></li>
                            </ul>
                    </li>
                    <li>
                        <button id="understandable" aria-expanded="false">Zrozumiałość<i class='fa fa-angle-down' style="margin-left: 0.5em;"></i></button>
                            <ul id="understandable-items" style="padding-left: 0.2em;">
                                <li><a href="{{ url('read_index', {id: 10}) }}">3.1 Możliwość odczytania</a></li>
                                <li><a href="{{ url('predict_index', {id: 11}) }}">3.2 Przewidywalność</a></li>
                                <li><a href="{{ url('help_index', {id: 12}) }}">3.3 Pomoc przy <br/>wprowadzaniu informacji</a></li>
                            </ul>
                    </li>
                    <li>
                        <button id="robust" aria-expanded="false">Solidność<i class='fa fa-angle-down' style="margin-left: 0.5em;"></i></button>
                            <ul id="robust-items" style="padding-left: 0.2em;">
                                <li><a href="{{ url('compatible_index', {id: 13}) }}">4.1 Kompatybilność</a></li>
                            </ul>
                    </li>
                </ul>
            </li>
            <li class="main-item"><a href="{{ url('WCAG_checklist_index') }}">Checklista wytycznych WCAG 2.1</a></li>
        </ul>
    </nav>

    <button id="sidebar-btn-mobile">Menu boczne</button>
{% endblock %}

{#    TODO: po kliknięciu raz przyciusku hover już nie jest niebieski #}
    {% block javascripts %}
        <script>
            const wcagList = document.getElementById('sidebar');
            const btnMobile = document.getElementById('sidebar-btn-mobile');

            const wcagListContent = document.getElementById('wcag-list-content');
            const perceivable = document.getElementById('perceivable');
            const perceivableItems = document.getElementById('perceivable-items');
            const operable = document.getElementById('operable');
            const operableItems = document.getElementById('operable-items');
            const understandable = document.getElementById('understandable');
            const understandableItems = document.getElementById('understandable-items');
            const robust = document.getElementById('robust');
            const robustItems = document.getElementById('robust-items');
            const perceivableArrow = document.querySelector('#perceivable .fa-angle-down');
            const operableArrow = document.querySelector('#operable .fa-angle-down');
            const understandableArrow = document.querySelector('#understandable .fa-angle-down');
            const robustArrow = document.querySelector('#robust .fa-angle-down');

            // let wcagItems = [perceivableItems, operableItems, understandableItems, robustItems];}

            let clicked_perceivable = false;
            perceivable.addEventListener('click', function() {
                if(clicked_perceivable === false) {
                    perceivableArrow.classList.remove('fa-angle-down');
                    perceivableArrow.classList.add('fa-angle-up');
                    perceivable.ariaExpanded = 'true';
                    perceivable.style.backgroundColor = '#86a3bf';
                    perceivableItems.style.display = 'block';
                    clicked_perceivable = true;
                }
                    // [operableItems, understandableItems, robustItems].forEach(item => {
                    //     item.style.display = 'none';
                    // });
                    // [operable, understandable, robust].forEach(item => {
                    //     item.style.backgroundColor = '#b9b9b9';
                    // })

/*                    operableItems.style.display = 'none';
                    understandableItems.style.display = 'none';
                    robustItems.style.display = 'none';

                    operable.style.backgroundColor = '#b9b9b9';
                    understandable.style.backgroundColor = '#b9b9b9';
                    robust.style.backgroundColor = '#b9b9b9';*/
                else {
                    perceivableArrow.classList.add('fa-angle-down');
                    perceivableArrow.classList.remove('fa-angle-up');
                    perceivable.ariaExpanded = 'false';
                    perceivable.style.backgroundColor = '#b9b9b9';
                    perceivableItems.style.display = 'none';
                    clicked_perceivable = false;
                }
            });
            let clicked_operable = false;
            operable.addEventListener('click', function() {
                if(clicked_operable === false) {
                    operableArrow.classList.remove('fa-angle-down');
                    operableArrow.classList.add('fa-angle-up');
                    operable.ariaExpanded = 'true';
                    operable.style.backgroundColor = '#86a3bf';
                    operableItems.style.display = 'block';
                    clicked_operable = true;
                }
                else {
                    operableArrow.classList.add('fa-angle-down');
                    operableArrow.classList.remove('fa-angle-up');
                    operable.ariaExpanded = 'false';
                    operable.style.backgroundColor = '#b9b9b9';
                    operableItems.style.display = 'none';
                    clicked_operable = false;
                }
            });
            let clicked_understandable = false;
            understandable.addEventListener('click', function() {
                if(clicked_understandable === false) {
                    understandableArrow.classList.remove('fa-angle-down');
                    understandableArrow.classList.add('fa-angle-up');
                    understandable.ariaExpanded = 'true';
                    understandable.style.backgroundColor = '#86a3bf';
                    understandableItems.style.display = 'block';
                    clicked_understandable = true;
                }
                else {
                    understandableArrow.classList.add('fa-angle-down');
                    understandableArrow.classList.remove('fa-angle-up');
                    understandable.ariaExpanded = 'false';
                    understandable.style.backgroundColor = '#b9b9b9';
                    understandableItems.style.display = 'none';
                    clicked_understandable = false;
                }
            });
            let clicked_robust = false;
            robust.addEventListener('click', function() {
                if(clicked_robust === false) {
                    robustArrow.classList.remove('fa-angle-down');
                    robustArrow.classList.add('fa-angle-up');
                    robust.ariaExpanded = 'true';
                    robust.style.backgroundColor = '#86a3bf';
                    robustItems.style.display = 'block';
                    clicked_robust = true;
                }
                else {
                    robustArrow.classList.add('fa-angle-down');
                    robustArrow.classList.remove('fa-angle-up');
                    robust.ariaExpanded = 'false';
                    robust.style.backgroundColor = '#b9b9b9';
                    robustItems.style.display = 'none';
                    clicked_robust = false;
                }
            });

            btnMobile.addEventListener('click', () => {
                if (wcagList.style.display !== 'block') {
                    wcagList.style.display = 'block';
                    btnMobile.textContent = 'Zamknij menu';
                    // btnMobile.ariaExpanded = 'true';
                }
                else if (wcagList.style.display === 'block') {
                    wcagList.style.display = 'none';
                    btnMobile.textContent = 'Menu boczne';
                    // btnMobile.ariaExpanded = 'false';
                }
            });
        </script>
    {% endblock %}
