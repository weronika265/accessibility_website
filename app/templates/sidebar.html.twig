{#{% extends 'base.html.twig' %}#}

{% block body %}
    <nav aria-label="Creator sidebar" id="sidebar">
        <ul>
            <li id="wcag-list">
                <div class="main-item">Wytyczne WCAG 2.1</div>
                <ul id="wcag-list-content">
                    <li id="perceivable">
                        <div>Postrzegalność</div>
                        <ul id="perceivable-items">
                            <li><a href="{{ url('alt-txt_index') }}">1.1 Alternatywa tekstowa</a></li>
                            <li><a href="{{ url('multimedia_index') }}">1.2 Multimedia</a></li>
                            <li><a href="{{ url('adapt_index') }}">1.3 Możliwość adaptacji</a></li>
                            <li><a href="{{ url('distinguish_index') }}">1.4 Rozróżnialność</a></li>
                        </ul>
                    </li>
                    <li id="operable">
                        Funkcjonalność
                        <ul id="operable-items">
                            <li><a href="{{ url('keyboard_index') }}">2.1 Dostępność z klawiatury</a></li>
                            <li><a href="{{ url('time_index') }}">2.2 Wystarczający czas</a></li>
                            <li><a href="{{ url('epilepsy_index') }}">2.3 Ataki padaczki</a></li>
                            <li><a href="{{ url('nav_index') }}">2.4 Możliwość nawigacji</a></li>
                            <li><a href="{{ url('inputs_index') }}">2.5 Metody obsługi</a></li>
                        </ul>
                    </li>
                    <li id="understandable">
                        Zrozumiałość
                        <ul id="understandable-items">
                            <li><a href="{{ url('read_index') }}">3.1 Możliwość odczytania</a></li>
                            <li><a href="{{ url('predict_index') }}">3.2 Przewidywalność</a></li>
                            <li><a href="{{ url('help_index') }}">3.3 Pomoc przy wprowadzaniu informacji</a></li>
                        </ul>
                    </li>
                    <li id="robust">
                        Solidność
                        <ul id="robust-items">
                            <li><a href="{{ url('compatible_index') }}">4.1 Kompatybilność</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="main-item"><a href="{{ url('WCAG_checklist_index') }}">Checklista wytycznych WCAG 2.1</a></li>
        </ul>
    </nav>

    <button id="sidebar-btn-mobile">Menu boczne</button>
{% endblock %}
{# TODO: sidebar ma być przy main tag?? #}

{#    TODO: poprawić, bo po hover już nie podświetla ponownie i zamykać poprzednie po naciśnięciu innej zasady -> + zamykać inne po naciśnięciu jednej z pozycji z zasad #}
    {% block javascripts %}
        <script>
            const wcagList = document.getElementById('sidebar');
            const btnMobile = document.getElementById('sidebar-btn-mobile');

            const wcagListContent = document.getElementById('wcag-list-content');
            const perceivable = document.getElementById('perceivable');
            const perceivableItems = document.getElementById('perceivable-items');
            const operable = document.getElementById('operable');
            const operableItems = document.getElementById('operable-items');
            const understandable = document.getElementById('understandable');
            const understandableItems = document.getElementById('understandable-items');
            const robust = document.getElementById('robust');
            const robustItems = document.getElementById('robust-items');

            let wcagItems = [perceivableItems, operableItems, understandableItems, robustItems];

            let clicked_perceivable = false;
            perceivable.addEventListener('click', function() {
                if(clicked_perceivable === false) {
                    perceivable.style.backgroundColor = '#5b7b9a';
                    perceivableItems.style.display = 'block';
                    clicked_perceivable = true;

                    // [operableItems, understandableItems, robustItems].forEach(item => {
                    //    item.style.display = 'none';
                    // });
                }
                else {
                    perceivable.style.backgroundColor = '#ababab';
                    perceivableItems.style.display = 'none';
                    clicked_perceivable = false;
                }
            });
            let clicked_operable = false;
            operable.addEventListener('click', function() {
                if(clicked_operable === false) {
                    operable.style.backgroundColor = '#5b7b9a';
                    operableItems.style.display = 'block';
                    clicked_operable = true;

                    // [perceivableItems, understandableItems, robustItems].forEach(item => {
                    //     item.style.display = 'none';
                    // });
                }
                else {
                    operable.style.backgroundColor = '#ababab';
                    operableItems.style.display = 'none';
                    clicked_operable = false;
                }
            });
            let clicked_understandable = false;
            understandable.addEventListener('click', function() {
                if(clicked_understandable === false) {
                    understandable.style.backgroundColor = '#5b7b9a';
                    understandableItems.style.display = 'block';
                    clicked_understandable = true;

                    // [perceivableItems, operableItems, robustItems].forEach(item => {
                    //     item.style.display = 'none';
                    // });
                }
                else {
                    understandable.style.backgroundColor = '#ababab';
                    understandableItems.style.display = 'none';
                    clicked_understandable = false;
                }
            });
            let clicked_robust = false;
            robust.addEventListener('click', function() {
                if(clicked_robust === false) {
                    robust.style.backgroundColor = '#5b7b9a';
                    robustItems.style.display = 'block';
                    clicked_robust = true;

                    // [perceivableItems, operableItems, understandableItems].forEach(item => {
                    //     item.style.display = 'none';
                    // });
                }
                else {
                    robust.style.backgroundColor = '#ababab';
                    robustItems.style.display = 'none';
                    clicked_robust = false;
                }
            });

            btnMobile.addEventListener('click', () => {
                if (wcagList.style.display !== 'block') {
                    wcagList.style.display = 'block';
                    btnMobile.textContent = 'Zamknij menu';
                }
                else if (wcagList.style.display === 'block') {
                    wcagList.style.display = 'none';
                    btnMobile.textContent = 'Otwórz menu';
                }
            });

            // function toggle(id) {
            //     let element = document.getElementById(id);
            //     if (element.style.display === 'none') {
            //         element.style.display = 'block';
            //     }
            //     else {
            //         element.style.display = 'none';
            //     }
            // }
        </script>
    {% endblock %}
